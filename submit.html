<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Submit Your Demo</title>
<script src="https://cdn.emailjs.com/dist/email.min.js"></script>
<script>
  (function(){
    emailjs.init("service_3qpg3mg"); // Replace with your EmailJS User ID
  })();

  function sendDemo(event) {
    event.preventDefault();

    const fileInput = document.getElementById("mp3file");
    const file = fileInput.files[0];

    if (!file) {
      alert("Please select an MP3 file.");
      return;
    }

    if (file.type !== "audio/mpeg" && file.type !== "audio/mp3") {
      alert("Please upload a valid MP3 file.");
      return;
    }

    const reader = new FileReader();
    reader.onload = function() {
      const base64File = reader.result.split(",")[1]; // get base64 string

      const templateParams = {
        to_email: "yakeirecords@gmail.com",
        from_name: "Demo Submission",
        message: "New demo submission attached.",
        attachment: base64File,
        attachment_filename: file.name,
      };

      emailjs.send("YOUR_SERVICE_ID", "YOUR_TEMPLATE_ID", templateParams)
        .then(() => {
          alert("Demo sent successfully!");
          document.getElementById("demoForm").reset();
        }, (error) => {
          alert("Failed to send demo: " + JSON.stringify(error));
        });
    };

    reader.readAsDataURL(file);
  }
</script>
</head>
<body style="background:#000; color:#fff; font-family:sans-serif; display:flex; flex-direction:column; align-items:center; padding:2rem;">
  <h1>Submit Your Demo</h1>
  <form id="demoForm" onsubmit="sendDemo(event)" style="display:flex; flex-direction:column; gap:1rem; width:300px;">
    <label for="mp3file">Upload your MP3 demo:</label>
    <input type="file" id="mp3file" accept=".mp3,audio/*" required />
    <button type="submit" style="background:#fff; color:#000; padding:0.5rem;">Submit your demo</button>
  </form>
</body>
</html>
